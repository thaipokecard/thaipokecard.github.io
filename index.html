<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113">
  <style type="text/css">
      body {
          padding: 0px;
          margin: 0px;
          line-height: 0;
      }

      p {
          color: white;
          font-weight: bold;
      }
  </style>
</head>
<body>
<table border=0 cellpadding=0 cellspacing=0>
    <tr height="160">
        <td><img height='128' src='' id='slot1' name='slot1'><p align="center" id="nick1"></p></td>
        <td><img height='128' src='' id='slot2' name='slot2'><p align="center" id="nick2"></p></td>
    </tr>
    <tr height="160">
        <td><img height='128' src='' id='slot3' name='slot3'><p align="center" id="nick3"></p></td>
        <td><img height='128' src='' id='slot4' name='slot4'><p align="center" id="nick4"></p></td>
    </tr>
    <tr height="160">
        <td><img height='128' src='' id='slot5' name='slot5'><p align="center" id="nick5"></p></td>
        <td><img height='128' src='' id='slot6' name='slot6'><p align="center" id="nick6"></p></td>
    </tr>
</table>

<div id='fordebug'></div>
1. <input type='text' id='pkmn1'></input><input type='text' id='name1'><button id='update1'>update</button></input><br>
2. <input type='text' id='pkmn2'></input><input type='text' id='name2'><button id='update2'>update</button></input><br>
3. <input type='text' id='pkmn3'></input><input type='text' id='name3'><button id='update3'>update</button></input><br>
4. <input type='text' id='pkmn4'></input><input type='text' id='name4'><button id='update4'>update</button></input><br>
5. <input type='text' id='pkmn5'></input><input type='text' id='name5'><button id='update5'>update</button></input><br>
6. <input type='text' id='pkmn6'></input><input type='text' id='name6'><button id='update6'>update</button></input><br>
<script type = "text/javascript">
    
    function updateImages(data) {
        var slots = ['slot1','slot2','slot3','slot4','slot5','slot6']
        for (const key of slots) {
            var image = document.getElementById(key);
            var nick = document.getElementById('nick'+key[4]);
            if (data[key] == 'ball') {
                image.src = 'ball.png';
                nick.innerHTML = '';
            } else {
                image.src = "https://img.pokemondb.net/sprites/home/normal/" + data[key] + ".png";
                nick.innerHTML = data['name'+key[4]].toUpperCase();
            }
            
        }
    }
    
    
</script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.3.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.3.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDQgEJzNZ48gpqzlzmPjm8IFaUVF8OxbIg",
    authDomain: "pokemon-overlay.firebaseapp.com",
    projectId: "pokemon-overlay",
    storageBucket: "pokemon-overlay.appspot.com",
    messagingSenderId: "717576650750",
    appId: "1:717576650750:web:f4795a90336f1e5e004aaf",
    measurementId: "G-N56N498XJL"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  
  import { getDatabase, ref, onValue, update} from "https://www.gstatic.com/firebasejs/9.3.0/firebase-database.js";

  const db = getDatabase();
  const starCountRef = ref(db, '/pokemon');
  onValue(starCountRef, (snapshot) => {
    const data = snapshot.val();
    updateImages(data);
  });
    
    function updatePokemon(evt) {
        var i = evt.currentTarget.myParam;
        var name = document.getElementById('pkmn'+i).value;
        var nick = document.getElementById('name'+i).value;
        const db = getDatabase();
        const updates = {};
        updates['/pokemon/slot'+i] = name;
        updates['/pokemon/name'+i] = nick;
        return update(ref(db), updates);
    }
    
    for (var i = 1;i < 7;i++) {
        const elem = document.getElementById("update"+i);
        elem.addEventListener("click",updatePokemon,false);
        elem.myParam = i;
    }
    
</script>
</body>
</html>
